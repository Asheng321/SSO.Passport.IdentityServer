(function(n,t){typeof define=="function"&&define.amd?define(["jquery"],t):typeof exports=="object"?module.exports=t():n.jeDate=t()})(this,function(){function o(n,t){this.opts=t;this.valCell=n;this.format=this.opts.format;this.initdates()}var n={},c=document,f="YYYY|MM|DD|hh|mm|ss|zz",u=/\-/g,l="YYYY|MM|DD|hh|mm|ss|zz".replace("|zz",""),t=function(n){return window.parseInt(n,10)},r={skinCell:"jedateblue",language:{name:"cn",month:["01","02","03","04","05","06","07","08","09","10","11","12"],weeks:["日","一","二","三","四","五","六"],times:["小时","分钟","秒数"],titText:"请选择日期时间",clear:"清空",today:"现在",yes:"确定",close:"关闭"},range:!1,trigger:"click",format:"YYYY-MM-DD hh:mm:ss",minDate:"1900-01-01 00:00:00",maxDate:"2099-12-31 23:59:59"},h;$.fn.jeDate=function(n){return new o($(this),n||{})};$.extend({jeDate:function(n,t){return new o($(n),t||{})}});n.isObj=function(n){for(var t in n)return!0;return!1};n.reMatch=function(n){return n.match(/\w+|d+/g)};n.docScroll=function(n){return n=n?"scrollLeft":"scrollTop",document.body[n]|document.documentElement[n]};n.docArea=function(n){return document.documentElement[n?"clientWidth":"clientHeight"]};n.isLeap=function(n){return n%100!=0&&n%4==0||n%400==0};n.digit=function(n){return n<10?"0"+(n|0):n};n.isNum=function(n){return/^[+-]?\d*\.?\d*$/.test(n)?!0:!1};n.getDaysNum=function(i,r){var u=31;switch(t(r)){case 2:u=n.isLeap(i)?29:28;break;case 4:case 6:case 9:case 11:u=30}return u};n.getYM=function(n,t,i){var r=new Date(n,t-1);return r.setMonth(t-1+i),{y:r.getFullYear(),m:r.getMonth()+1}};n.prevMonth=function(t,i,r){return n.getYM(t,i,0-(r||1))};n.nextMonth=function(t,i,r){return n.getYM(t,i,r||1)};n.parse=function(t,i){return i.replace(new RegExp(f,"g"),function(i){return i=="zz"?"00":n.digit(t[i])})};n.isparmat=function(t){var r=n.reMatch(t),u=f.split("|"),i=[];return $.each(u,function(n,t){$.each(r,function(n,r){t==r&&i.push(r)})}),i.join("-")};n.parseOld=function(i,r,u){i=i.concat(r);var e={},s=f.split("|"),o=n.reMatch(u);return $.each(i,function(n,i){e[o[n]]=t(i)}),u.replace(new RegExp(f,"g"),function(t){return t=="zz"?"00":n.digit(e[t])})};n.checkFormat=function(n){var t=[];return n.replace(new RegExp(f,"g"),function(n){t.push(n)}),t.join("-")};n.splMatch=function(t){var i=t.split(" ");return n.reMatch(i[0])};n.mlen=function(n){var t=n.match(/\w+|d+/g).length,i=n.substring(0,2)=="hh";return i&&t<=3?7:t};n.checkDate=function(t){var i=n.reMatch(t);return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?!1:i[1]>12||i[1]<1?!1:i[2]<1||i[2]>31?!1:(i[1]==4||i[1]==6||i[1]==9||i[1]==11)&&i[2]>30?!1:i[1]==2&&(i[2]>29||(i[0]%100==0&&i[0]%400!=0||i[0]%4!=0)&&i[2]>28)?!1:!0};n.reSetDate=function(i,r,u){var c,l;r=r||{};u=u||"YYYY-MM-DD hh:mm:ss";var e=new Date,h=[],o={YYYY:"FullYear",MM:"Month",DD:"Date",hh:"Hours",mm:"Minutes",ss:"Seconds"},a=r.YYYY==undefined?e.getFullYear():r.YYYY,v=r.MM==undefined?e.getMonth()+1:r.MM,y=r.DD==undefined?e.getDate():r.DD,p=r.hh==undefined?e.getHours():r.hh,w=r.mm==undefined?e.getMinutes():r.mm,b=r.ss==undefined?e.getSeconds():r.ss,f=new Date(a,v,y,p,w,b),s;for(k in i)i.hasOwnProperty(k)&&h.push(k);return $.each(["ss","mm","hh","DD","MM","YYYY"],function(n,r){$.each(h,function(n,u){s=f["get"+o[r]]()==31;var e=s?f["get"+o[r]]()-1:f["get"+o[r]](),h=t(i[r]),c;c=r=="MM"?e+h>11?e+h-1:e+h:e+h;u==r&&f["set"+o[r]](c)})}),c=f.getMonth()==11?f.getMonth()+1:f.getMonth(),l=n.parse({YYYY:f.getFullYear(),MM:n.digit(c),DD:s?f.getDate()+1:f.getDate(),hh:n.digit(f.getHours()),mm:n.digit(f.getMinutes()),ss:n.digit(f.getSeconds())},u),l};n.isValHtml=function(n){return/textarea|input/.test(n[0])};n.isBool=function(n){return n==undefined||n==!0?!0:!1};h=function(){for(var n="",t=[1,2,3,4,5,6,7,8,9,0],i=0;i<8;i++)n+=t[Math.round(Math.random()*(t.length-1))];return n};var i=o.prototype,s="jefixed",e=n.reMatch(f);return i.initdates=function(){var i=this,t=i.opts,p=new Date,c=t.trigger!=undefined?t.trigger:r.trigger,v=t.zIndex==undefined?1e4:t.zIndex,y=t.isinitVal==undefined||t.isinitVal==!1?!1:!0,a="#jedatebox"+h(),o=n.isBool(t.isShow),s,e,l,u,f;if(i.areaVal=[],t.range=t.range||r.range,i.fixed=n.isBool(t.fixed),s=function(u,f){var e=$("<div/>",{id:f.replace(/\#/g,""),"class":"jedatebox "+(t.skinCell||r.skinCell)}),l=o?i.fixed==!0?"absolute":"fixed":"relative",h,c,s;e.attr("author","chen guojun").css({"z-index":f!="#jedatebox"?"":v,position:l});f!="#jedatebox"&&e.attr({jeformat:t.format||r.format,jefixed:a});h=r.minDate.split(" ");c=r.maxDate.split(" ");n.minDate=(!/\-/g.test(t.minDate)&&t.minDate!=undefined?h[0]+" "+t.minDate:t.minDate)||r.minDate;n.maxDate=(!/\-/g.test(t.maxDate)&&t.maxDate!=undefined?c[0]+" "+t.maxDate:t.maxDate)||r.maxDate;n.boxelem=o?"#jedatebox":f;i.format=o?t.format||r.format:e.attr("jeformat");s=i.getValue({});$(u).append(e);i.renderHtml(s[0].YYYY,s[0].MM,s[0].DD,t,n.boxelem)},y&&c&&(e=t.initDate||[],e[1]?(u=n.reMatch(n.reSetDate(e[0])),l=[{YYYY:u[0],MM:n.digit(u[1]),DD:n.digit(u[2]),hh:n.digit(u[3]),mm:n.digit(u[4]),ss:n.digit(u[5])}]):l=i.getValue(n.isObj(e[0])?e[0]:{}),i.setValue(l[0],t.format||r.format)),o)if(f=["body","#jedatebox"],c)i.valCell.on(c,function(n){(n.stopPropagation(),$(f[1]).length>0)||s(f[0],f[1])});else s(f[0],f[1]);else s(i.valCell,a)},i.parseFormat=function(t,i){return n.parse(t,i)},i.parseValue=function(t,i){var r=this,c=[],f=r.opts,l="",a=$(n.boxelem),v=i==undefined?$(a.attr(s)).length>0?a.attr("jeformat"):r.format:i,u=$.isFunction(t)?t():t,o,h;return(u!=""||u.length>0)&&(o=f.range!=!1,h=new Array(o?2:1),$.each(h,function(t){var i=h.length==2,o={},l=n.reMatch(v),s=i?u.split(f.range):u;i&&$.each(n.reMatch(s[t]),function(t,i){o[n.mlen(r.format)==7?l[t]:e[t]]=i});c.push(r.parseFormat(i?o:s,v));o={}}),l=c.join(o?f.range:"")),l},i.setValue=function(i,r,u){var f=this,h=f.valCell,e,c,o,l,s;return typeof i=="string"&&i!=""&&f.opts.range==!1?(c=n.reMatch(i),o={},$.each(n.reMatch(f.format),function(n,i){o[i]=t(c[n])}),e=o):e=i,l=n.isValHtml(h)?"val":"text",s=f.parseValue(e,r),u!=!1&&h[l](s),s},i.getValue=function(i){var u=this,l=u.valCell,f=u.opts,r=new Date,s,a=r.getFullYear(),v=r.getMonth(),y=r.getDate(),p=r.getHours(),w=r.getMinutes(),b=r.getSeconds(),k;if(i==undefined&&n.isBool(f.isShow))k=n.isValHtml(l)?"val":"text",s=l[k]();else{var tt=n.isBool(f.isShow)?u.getValue()=="":!n.isBool(f.isShow),h=$.extend({YYYY:null,MM:null,DD:null},i||{}),c=[],d=new Array(2),g=function(n){return[h[n]==undefined||h[n]==null,h[n]]},o=[{YYYY:a,MM:v,DD:y,hh:p,mm:w,ss:b,zz:00},{YYYY:a,MM:v,DD:y,hh:p,mm:w,ss:b,zz:00}];if(tt)$.each(d,function(n){var i={};$.each(e,function(r,u){i[u]=t(g(u)[0]?u=="MM"?o[n][u]+1:o[n][u]:g(u)[1])});c.push($.extend(o[n],i))});else{var it=f.range!=!1,nt=u.getValue(),rt=nt.split(f.range),ut=n.reMatch(u.format);$.each(d,function(r){var u={},e=it?n.reMatch(rt[r]):n.reMatch(nt),f;$.each(ut,function(n,i){u[i]=t(e[n])});f=$.extend(u,i||{});c.push($.extend(o[r],f))})}s=c}return s},i.renderHtml=function(t,i,u,f,e){var o=this,s=$(e),l=f.language||r.language,b=f.range!=!1,v=n.isBool(f.isShow),k=n.minDate.replace(/\s+/g," ").split(" "),d=n.maxDate.replace(/\s+/g," ").split(" "),g=o.getValue({YYYY:t,MM:i,DD:u}),h=g[0],y=g[1];o.format=v?o.format:s.attr("jeformat");var c=n.mlen(o.format),nt=/\hh/.test(o.format),ft=l.name=="cn"?v?l.clear:"重置":v?l.clear:"Reset",p="<div class='arthead'><\/div><div class='artcont'><\/div>",tt=$("<div/>",{"class":"maincont"}),a=$("<div/>",{"class":"mainfoot"}),et=$("<div/>",{"class":"daybox"}).append(p),ot=$("<div/>",{"class":"ymsbox"}).append(p),st=$("<div/>",{"class":"timebox"}).append(p);tt.append(ot).append(et).append(c==1||c==2?"":st);s.empty().append(tt.children().hide()).append(a);var ht=function(){var n="<em><\/em><i>:<\/i><em><\/em><i>:<\/i><em><\/em>";return b?n+"<span> ~ <\/span>"+n:n},ct='<span class="clear">'+ft+'<\/span><span class="today">'+l.today+'<\/span><span class="setok">'+l.yes+"<\/span>",it=$("<div/>",{"class":"timecon"}).append(ht()),lt=$("<div/>",{"class":"btnscon"}).append(ct);if(a.append(it).append(lt),s.append($("<div/>",{"class":"jedate-tips"}).hide()),o.maincon=function(n,t){return s.find(n+" > "+(t==0?".arthead":".artcont"))},nt){var at=/\s/.test(n.minDate)?k[1]:k[0],vt=/\s/.test(n.maxDate)?d[1]:d[0],w=n.reMatch(at),rt=[h.hh,h.mm,h.ss],ut=[];ut=b?o.getValue()==""?c==7?w.concat(w):w.concat([00,00,00]):rt.concat([y.hh,y.mm,y.ss]):rt;$.each(a.find(".timecon em"),function(t){$(this).text(n.digit(ut[t]))})}else a.find(".timecon").hide();if(c==7)o.maincon(".timebox",0).html(l.titText),s.find(".timebox").show(),o.eachHms(f,s);else if(c>=3&&c<=6){if(o.maincon(".daybox",0).append('<em class="yearprev yprev"><\/em><em class="monthprev mprev"><\/em><em class="monthnext mnext"><\/em><em class="yearnext ynext"><\/em>'),s.find(".daybox").show(),o.eachDays(h.YYYY,h.MM,h.DD,f,s),nt){o.maincon(".timebox",1).attr("cont","no");o.maincon(".timebox",0).html(l.titText+'<em class="close"><\/em>');s.find(".timecon").on("click",function(){o.maincon(".timebox",1).attr("cont")=="no"&&(o.maincon(".timebox",1).attr("cont","yes"),s.find(".ymsbox,.daybox").hide(),s.find(".timebox").show(),o.eachHms(f,s),o.dateOrien(s,o.valCell))});o.maincon(".timebox",0).on("click",".close",function(){o.maincon(".timebox",1).html("").attr("cont","no");s.find(".ymsbox,.timebox").hide();s.find(".daybox").show();o.dateOrien(s,o.valCell)});it.css({cursor:"pointer"})}o.maincon(".ymsbox",0).append('<em class="yearprev yprev"><\/em><em class="yearnext ynext"><\/em><em class="close"><\/em>').addClass("ymfix");o.eachYM(h.YYYY,h.MM,f,s,".fixcon")}(c==1||c==2)&&(o.maincon(".ymsbox",0).append('<em class="yearprev yprev"><\/em><em class="yearnext ynext"><\/em>'),s.find(".ymsbox").show(),o.eachYM(h.YYYY,h.MM,f,s,".jedate-cont"));n.isBool(f.isTime)&&v||a.find(".timecon").hide();v||a.find(".today").hide();o.eventsDate(f,s);setTimeout(function(){f.success&&f.success(s)},50)},i.createYMHtml=function(i,r,u){var f=t(i),e=t(r),o=this.maincon(".daybox",0),s=$("<p/>").css({width:n.isBool(u.multiPane)?"":"50%"}),h="<span class='ymbtn'>"+e+"月 "+f+"年<\/span>";return o.append(s.html(h)),f+"-"+e},i.eachYM=function(i,f,e){var o=this,y=new Array(15),d=new Date,g=e.language||r.language,c=o.maincon(".ymsbox",1),l=n.isBool(e.multiPane),nt=n.mlen(o.format),h=o.getValue({}),p=/\hh/.test(o.format),s=nt==1;c.find(".ymcon").length>0&&c.find(".ymcon").remove();$.each(new Array(l?1:2),function(r){var a=function(i,f,e){var s=i.replace(u,""),h=f.replace(u,""),c=e.replace(u,"");return/YYYY-MM-DD/g.test(n.isparmat(o.format))?t(s)==t(h)?r==0?"actdate":"":"":t(s)==t(h)?(p||(o.areaVal.push(i),o.areaStart=!0),"actdate"):t(s)>t(h)&&t(s)<t(c)?"contain":t(s)==t(c)?(p||(o.areaVal.push(i),o.areaStart=!0),"actdate"):""},v=$("<div/>",{"class":"ymcon"}).addClass(r==1?"spaer":""),f=[],l;$.each(s?y:g.month,function(u,c){var l=r==1?i+(s?y.length:1):i,p,g,nt;if(u=r==1?s?15+u:12+u:u,s){var w=n.splMatch(n.minDate),b=n.splMatch(n.maxDate),tt=w[0],it=b[0],v=l-7+u,rt=o.getValue()==""&&n.isBool(e.isShow)?d.getFullYear():o.getValue();v<tt||v>it?f.push({style:"disabled",ym:v,idx:u}):(p=a(v.toString(),rt.toString(),h[1].YYYY.toString()),f.push({style:p,ym:v,idx:u}))}else{var w=n.splMatch(n.minDate),b=n.splMatch(n.maxDate),k=t(l+""+n.digit(c)+"01"),ut=t(w[0]+""+n.digit(w[1])+""+n.digit(w[2])),ft=t(b[0]+""+n.digit(b[1])+""+n.digit(b[2]));k<ut||k>ft?f.push({style:"disabled",ym:l+"-"+n.digit(c),idx:u}):(g=l+"-"+n.digit(c),nt=h[0].YYYY+"-"+n.digit(h[0].MM),p=a(g,nt,h[1].YYYY+"-"+n.digit(h[1].MM)),f.push({style:p,ym:l+"-"+n.digit(c),idx:u}))}});l=$("<table/>",{"class":s?"yul":"ymul"});$.each(new Array(s?5:4),function(){var n=$("<tr/>");$.each(new Array(3),function(){var t=$("<td/>");l.append(n.append(t))})});$.each(f,function(n,t){l.find("td").eq(n).addClass(t.style).attr({idx:t.idx,"je-val":t.ym}).html(t.ym)});c.append(v.append(l))});var w=c.find("td"),b=o.maincon(".ymsbox",0),tt=s?l?14:29:l?11:23,a=w.eq(0).text(),v=w.eq(tt).text(),k=[s?a:a.substring(0,4),s?v:v.substring(0,4)];b.find("p").remove();b.append("<p>"+a+" ~ "+v+"<\/p>").attr({min:k[0],max:k[1]})},i.dateRegExp=function(n){var r=n.split(",")||[],i="",f=function(n){var i,r;for(n=n+"";(i=/#?\{(.*?)\}/.exec(n))!=null;)i.lastIndex=i.index+i[1].length+i[0].length-i[1].length-1,r=t(eval(i[1])),r<0&&(r="9700"+-r),n=n.substring(0,i.index)+r+n.substring(i.lastIndex+1);return n},u;if(r&&r.length>0){for(u=0;u<r.length;u++)i+=f(r[u]),u!=r.length-1&&(i+="|");i=i?new RegExp("(?:"+i+")"):null}else i=null;return i},i.eachDays=function(i,u,f,e){var o=this,ut=n.isBool(e.isShow),w=t(i),c=t(u),b=o.valCell,k=e.language||r.language,s=e.valiDate||[],l=n.reMatch(n.minDate),d=t(l[0]+""+n.digit(l[1])+""+n.digit(l[2])),a=n.reMatch(n.maxDate),g=t(a[0]+""+n.digit(a[1])+""+n.digit(a[2])),ft=n.isBool(e.multiPane),h=o.getValue(ut?{}:{YYYY:i,MM:u,DD:f}),nt=(b.val()||b.text())!=""&&e.range!=!1,tt=t(h[0].YYYY+""+n.digit(h[0].MM)+""+n.digit(h[0].DD)),v=function(t,i,r){var u=e.marks,f=function(n,t){for(var i=n.length;i--;)if(n[i]===t)return!0;return!1};return $.isArray(u)&&u.length>0&&f(u,t+"-"+n.digit(i)+"-"+n.digit(r))?'<i class="marks"><\/i>':""},y=function(n,t,i){var u;if(e.festival==!0&&k.name=="cn"){var r=o.jeLunar(n,t-1,i),f=r.solarFestival||r.lunarFestival,s=(f&&r.jieqi)!=""?f:r.jieqi||r.showInLunar;u='<p><span class="solar">'+i+'<\/span><span class="lunar">'+s+"<\/span><\/p>"}else u='<p class="nolunar">'+i+"<\/p>";return u},p=function(i,r,u,f){var e=t(i+""+n.digit(r)+""+n.digit(u));if(f){if(e>=d&&e<=g)return!0}else if(d>e||g<e)return!0},et=function(i,r){for(var g,u,c,rt,ut,f,b=0,a=[],ft=new Date(i,r-1,1).getDay()||7,et=n.getDaysNum(i,r),k=0,e=n.prevMonth(i,r),d=n.getDaysNum(i,e.m),s=n.nextMonth(i,r),l=d-ft+1;l<=d;l++,b++)g=v(e.y,e.m,l),f=p(e.y,e.m,l,!1)?"disabled":"other",a.push({style:f,ymd:e.y+"-"+e.m+"-"+l,day:l,d:y(e.y,e.m,l)+g,idx:k++});for(u=1;u<=et;u++,b++){var ot=v(i,r,u),f="",w=t(i+""+n.digit(r)+""+n.digit(u)),it=t(h[1].YYYY+""+n.digit(h[1].MM)+""+n.digit(h[1].DD)),st=w>tt,ht=w<it;p(i,r,u,!0)?w==tt?(f="actdate",o.areaVal.push(i+"-"+n.digit(r)+"-"+n.digit(u)),o.areaStart=!0):st&&ht&&nt?f="contain":w==it&&nt?(f="actdate",o.areaVal.push(i+"-"+n.digit(r)+"-"+n.digit(u)),o.areaEnd=!0):f="":f="disabled";a.push({style:f,ymd:i+"-"+r+"-"+u,day:u,d:y(i,r,u)+ot,idx:k++})}for(c=1,rt=42-b;c<=rt;c++)ut=v(s.y,s.m,c),f=p(s.y,s.m,c,!1)?"disabled":"other",a.push({style:f,ymd:s.y+"-"+s.m+"-"+c,day:c,d:y(s.y,s.m,c)+ut,idx:k++});return a},ot=function(t){var r=n.reMatch(t),i=[];return $.each(r,function(t,r){i.push(n.digit(r))}),i.join("-")},st=new Array(ft?1:2),it=c+1>12,rt=[];$.each(st,function(i){var r=$("<table/>",{"class":"daysul"}),u=$("<thead/>"),f=$("<tbody/>"),a=i==1?42:0;r.append(u).append(f);$.each(new Array(7),function(n){var t=$("<tr/>");$.each(new Array(7),function(){var i=$("<th/>"),r=$("<td/>");t.append(n==0?i:r.attr("idx",a++));n==0?u.append(t):f.append(t)})});var h=it&&i==1?w+1:w,l=it&&i==1?1:i==1?c+1:c,v=et(h,l),y=$("<div/>",{"class":"contlist"});$.each(k.weeks,function(n,t){r.find("th").eq(n).text(t)});rt.push(o.createYMHtml(h,l,e));$.each(v,function(i,u){var f=u.style,l,e,h,a,c;s.length>0&&s[0]!=""&&(/\%/g.test(s[0])?(l=s[0].replace(/\%/g,"").split(","),e=[],$.each(l,function(i,r){e.push(n.digit(t(r)))}),h=$.inArray(n.digit(u.day),e)==-1,f=n.isBool(s[1])?h?"disabled":f:h?f:"disabled"):(a=o.dateRegExp(s[0]),c=a.test(n.digit(u.day)),f=n.isBool(s[1])?c?"disabled":u.style:c?u.style:"disabled"));r.find("td").eq(i).addClass(f).attr("je-val",ot(u.ymd)).html(u.d)});o.maincon(".daybox",1).append(y.append(r)).addClass(i==1?"spaer":"")});o.maincon(".daybox",0).attr("je-ym",rt.join(","))},i.eachHms=function(i,u){var e=this,c=i.language||r.language,nt=n.isBool(i.multiPane),s=e.getValue({}),v=e.getValue()=="",l=i.range==!1,tt=n.minDate.replace(/\s+/g," ").split(" "),it=n.maxDate.replace(/\s+/g," ").split(" "),rt=/YYYY-MM-DD/g.test(n.isparmat(e.format))&&/\hh/.test(e.format),o=n.reMatch(tt[1]),h=n.reMatch(it[1]),y=e.maincon(".timebox",1),f=["action","disabled"],ut=u.find(".mainfoot .timecon em"),p=new Date,w=p.getHours(),b=p.getMinutes(),k=p.getSeconds(),d=[s[0].hh||w,s[0].mm||b,s[0].ss||k],g=[s[1].hh||w,s[1].mm||b,s[1].ss||k],a;i.range==!1&&u.find(".timelist").length>0||($.each(new Array(l?1:2),function(t){var r=$("<div/>",{"class":"timelist"}).css({width:l?"100%":"50%",float:l?"":"left"}),u=$("<div/>",{"class":"contime"}),e=$("<div/>",{"class":"textbox"}),s=e.append("<p>"+c.times[0]+"<\/p><p>"+c.times[1]+"<\/p><p>"+c.times[2]+"<\/p>");r.append(s);y.addClass(t==1?"spaer":"");$.each([24,60,60],function(e,s){for(var a,p="",w=$("<ul/>").attr("idx",t==1?3+e:e),l=ut.eq(e).text(),c=0;c<s;c++)a=$("<li/>"),p=i.range!=!1?rt?t==0?c>=o[e]?c==(v?o[e]:d[e])?f[0]:"":f[1]:c>h[e]?f[1]:c==(v?0:g[e])?f[0]:"":c>=o[e]?c==(v?o[e]:t==0?d[e]:g[e])?f[0]:"":f[1]:c>=o[e]&&c<=h[e]?l<o[e]?c==o[e]?f[0]:"":l>h[e]?c==h[e]?f[0]:"":c==l?f[0]:"":f[1],a.text(n.digit(c)).addClass(p),y.append(r.append(u.append(w.append(a))))});nt==!1&&l&&r.css({"padding-left":r.outerWidth()/2+12,"padding-right":r.outerWidth()/2+12})}),e.locateScroll(y.find("ul")),e.clickTime(i,u),a=[],$.each(o,function(n,i){t(i)>t(h[n])&&a.push("不能大于最大"+c.times[n])}),a.length>0&&e.tips(a.join("<br/>"),4.5))},i.eventsDate=function(t,i){var r=this,f=n.isBool(t.multiPane),u;if(r.clickYM(t,i),r.clickDays(t,i),r.clickBtn(t,i),n.isBool(t.isShow))if(u=t.position||[],u.length>0)i.css({top:u[0],left:u[1]});else{r.dateOrien(i,r.valCell);$(window).on("resize",function(){r.dateOrien(i,r.valCell)})}$(document).on("mouseup",function(t){if(t.stopPropagation(),n.boxelem=="#jedatebox"){var i=$(n.boxelem);i&&i.css("display")!=="none"&&r.dateClose();$("#jedatetipscon").length>0&&$("#jedatetipscon").remove();delete r.areaStart;delete r.areaEnd;r.areaVal=[]}});$(n.boxelem).on("mouseup",function(n){n.stopPropagation()})},i.clickYM=function(i,r){var f=this,l=f.maincon(".ymsbox",0),a=f.valCell,p=l.find(".yprev"),w=l.find(".ynext"),s=f.maincon(".daybox",0),v=n.isBool(i.isShow),b=s.find(".yprev"),k=s.find(".ynext"),d=s.find(".mprev"),g=s.find(".mnext"),h=n.mlen(f.format),nt=h==2,c=h==1,o=["actdate","contain"],e=new Date,tt=function(){var r=f.maincon(".ymsbox",1).find(".ymcon"),n=r.find("td");n.on("click",function(){var r=$(this),e=r.attr("je-val");r.hasClass("disabled")||(i.range==!1?(n.removeClass(o[0]),r.addClass(o[0]),f.maincon(".ymsbox",0).attr("data-val",r.text())):f.areaStart&&f.areaEnd==undefined?(r.addClass(o[0]),f.areaEnd=!0,f.areaVal.push(e),n.each(function(){var n=$(this),i=n.attr("je-val").replace(u,""),r=[f.areaVal[0].replace(u,""),f.areaVal[1].replace(u,"")],s=Math.min.apply(null,r),h=Math.max.apply(null,r),e;n.hasClass("other")||(e=t(i)>t(s)&&t(i)<t(h),e&&n.addClass(o[1]))})):f.areaStart&&f.areaEnd&&(f.delAreaAttr(),n.removeClass(o[0]).removeClass(o[1]),r.addClass(o[0]),f.areaVal.push(e),f.areaStart=!0))})},y;if(nt||c?(tt(),$.each([p,w],function(n,u){u.on("click",function(){var s=$(this),o=e.getMonth()+1,h=t(s.parent().attr("min")),l=t(s.parent().attr("max")),u=c?n==0?h:l:n==0?--h:++l;if(f.renderHtml(u,o,null,i,r),i.range==!1){var v=c?{YYYY:u}:{YYYY:u,MM:o},y=f.parseValue(v),p={YYYY:u,MM:o,DD:e.getDate(),hh:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds()};$.isFunction(i.toggle)&&i.toggle(a,y,p)}})})):($.each([b,k],function(u,o){o.on("click",function(o){o.stopPropagation();var c=n.reMatch($(this).parent().attr("je-ym")),l=t(c[0]),s=t(c[1]),h=u==0?--l:++l;if(f.renderHtml(h,s,null,i,r),i.range==!1){var v=f.getValue({})[0],y=f.parseValue({YYYY:h,MM:s,DD:v.DD}),p={YYYY:h,MM:s,DD:e.getDate(),hh:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds()};$.isFunction(i.toggle)&&i.toggle({elem:a,val:y,date:p})}})}),$.each([d,g],function(u,o){o.on("click",function(o){var c,l;o.stopPropagation();var v=n.reMatch($(this).parent().attr("je-ym")),y=t(v[0]),p=t(v[1]),s=n.prevMonth(y,p),h=n.nextMonth(y,p);if(u==0?f.renderHtml(s.y,s.m,null,i,r):f.renderHtml(h.y,h.m,null,i,r),c=u==0?s.y:h.y,l=u==0?s.m:h.m,i.range==!1){var w=f.getValue({})[0],b=f.parseValue({YYYY:c,MM:l,DD:w.DD}),k={YYYY:c,MM:l,DD:e.getDate(),hh:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds()};$.isFunction(i.toggle)&&i.toggle({elem:a,val:b,date:k})}})})),h>=3&&h<=6){f.maincon(".daybox",0).on("click",".ymbtn",function(){r.children(".ymsbox").show();r.children(".daybox,.mainfoot").hide();v&&f.dateOrien(r,f.valCell)});y=function(){var u=r.find(".ymcon"),t=u.find("td");t.on("click",function(){var u=$(this),e=n.reMatch(u.attr("je-val"));t.removeClass(o[0]);u.addClass(o[0]);r.children(".jedate-contfix").show();r.children(".jedate-jedatewrap").hide();f.renderHtml(e[0],e[1],null,i,r)})};$.each([p,w],function(n,u){u.on("click",function(){var s=e.getMonth()+1,u=t($(this).parent().attr("min")),o=t($(this).parent().attr("max")),h=c?n==0?u:o:n==0?--u:++o;f.eachYM(h,s,i,r,".jedate-contfix");y();v&&f.dateOrien(r,f.valCell);$.isFunction(i.toggle)&&i.toggle()})});l.on("click",".close",function(){r.children(".daybox,.mainfoot").show();r.children(".ymsbox").hide();v&&f.dateOrien(r,f.valCell)});y()}},i.gethmsVal=function(n){var t={};return n.find(".timecon em").each(function(n){var i=$(this).attr("disabled");i==undefined&&(t[e[3+n]]=$(this).text())}),t},i.clickDays=function(f,o){var h=this,v=h.valCell,a="je-val",y=o.find(".daysul"),l=y.find("td"),p=f.language||r.language,c=["actdate","contain"];l.on("click",function(i){var r=$(this),p=r.attr(a),k=n.reMatch(p),y=[],w,b;r.hasClass("disabled")||(i.stopPropagation(),w=function(){var i,p,u,w;$.each(k,function(n,i){y.push(t(i))});$(o.attr(s)).length>0?h.renderHtml(y[0],y[1],y[2],f,o):n.isBool(f.onClose)?(l.removeClass(c[0]),r.addClass(c[0])):(i={},p=n.reMatch(r.attr(a)),$.each(p,function(n,t){i[e[n]]=t}),u=/\hh/.test(h.format)?$.extend(i,h.gethmsVal(o)):i,w=h.setValue(u),h.dateClose(),($.isFunction(f.okfun)||f.okfun!=null)&&f.okfun&&f.okfun({elem:v,val:w,date:u}))},b=function(){h.areaStart&&h.areaEnd==undefined?(r.addClass(c[0]),h.areaEnd=!0,h.areaVal.push(p),l.each(function(){var n=$(this),i=n.attr("je-val").replace(u,""),r=[h.areaVal[0].replace(u,""),h.areaVal[1].replace(u,"")],e=Math.min.apply(null,r),o=Math.max.apply(null,r),f;n.hasClass("other")||n.hasClass("disabled")||(f=t(i)>t(e)&&t(i)<t(o),f&&n.addClass(c[1]))})):h.areaStart&&h.areaEnd&&(h.delAreaAttr(),l.removeClass(c[0]).removeClass(c[1]),r.addClass(c[0]),h.areaVal.push(p),h.areaStart=!0)},f.range==!1?w():b())});if(f.festival&&p.name=="cn"){o.addClass("grid");l.on("mouseover",function(){var o;$("#jedatetipscon").length>0&&$("#jedatetipscon").remove();var s=$(this),e=n.reMatch(s.attr(a)),u=$("<div/>",{id:"jedatetipscon","class":"jedatetipscon"}),r=h.jeLunar(t(e[0]),t(e[1])-1,t(e[2])),c="<p>"+r.solarYear+"年"+r.solarMonth+"月"+r.solarDate+"日 "+r.inWeekDays+'<\/p><p class="red">农历：'+r.shengxiao+"年 "+r.lnongMonth+"月"+r.lnongDate+"<\/p><p>"+r.ganzhiYear+"年 "+r.ganzhiMonth+"月 "+r.ganzhiDate+"日<\/p>",l=(r.solarFestival||r.lunarFestival)!=""?'<p class="red">'+("节日："+r.solarFestival+r.lunarFestival)+"<\/p>":"",v=r.jieqi!=""?'<p class="red">'+(r.jieqi!=""?"节气："+r.jieqi:"")+"<\/p>":"",y=(r.solarFestival||r.lunarFestival||r.jieqi)!=""?l+v:"";$("body").append(u);u.html(c+y);o=i.lunarOrien(u,s);u.css({"z-index":f.zIndex==undefined?10005:f.zIndex+5,top:o.top,left:o.left,position:"absolute",display:"block"})}).on("mouseout",function(){$("#jedatetipscon").remove()})}},i.clickBtn=function(t,i){var r=this,u=r.valCell,f=n.isBool(t.isShow),o=n.mlen(r.format)==7,c=n.isBool(t.multiPane),s=n.mlen(r.format)==2,h=n.mlen(r.format)==1;i.on("click",".clear",function(e){var o;if(e.stopPropagation(),f){var s=n.isValHtml(r.valCell)?"val":"text",h=r.valCell[s](),c=r.setValue("");r.dateClose();h!=""&&(n.isBool(t.clearRestore)&&(n.minDate=t.startMin||n.minDate,n.maxDate=t.startMax||n.maxDate),($.isFunction(t.clearfun)||t.clearfun!=null)&&t.clearfun({elem:u,val:c}))}else o=r.getValue({}),r.renderHtml(o[0].YYYY,o[0].MM,o[0].DD,t,i);t.range!=!1&&r.delAreaAttr()});t.range!=!1&&i.find(".today").hide();i.on("click",".today",function(){var i=new Date,f={YYYY:i.getFullYear(),MM:n.digit(i.getMonth()+1),DD:n.digit(i.getDate()),hh:n.digit(i.getHours()),mm:n.digit(i.getMinutes()),ss:n.digit(i.getSeconds())},e=r.setValue(f);r.dateClose();($.isFunction(t.okfun)||t.okfun!=null)&&t.okfun({elem:u,val:e,date:f})});i.on("click",".setok",function(c){var a,l,w,b,d,g,nt,tt,v;if(c.stopPropagation(),a=new Date,t.range==!1)b=r.gethmsVal(i),d=function(){var t={},u=s||h?".ymcon":".daysul",f=n.reMatch(i.find(u).find("td.actdate").attr("je-val"));return $.each(f,function(n,i){t[e[n]]=i}),/\hh/.test(r.format)?$.extend(t,b):t},l=o?b:d();else{var y={},p=[],k=[[],[]];i.find(".timecon em").each(function(n){var t=$(this).attr("disabled");t==undefined&&k[n>2?1:0].push($(this).text())});n.mlen(r.format)==7?t.range!=!1&&$.each(k,function(n,t){var i=t.join("");y[i]=t.join(":");p.push(i)}):$.each(r.areaVal,function(n,t){var i=t+(/\hh/.test(r.format)?" "+k[n].join(":"):""),u=i.replace(/\s|-|:/g,"");y[u]=i;p.push(u)});g=Math.min.apply(null,p);nt=Math.max.apply(null,p);l=y[g]+t.range+y[nt]}f?(w=r.setValue(l),r.dateClose()):w=r.setValue(l,r.format,!1);t.range==!1?v={YYYY:l.YYYY||a.getFullYear(),MM:n.digit(l.MM||a.getMonth()+1),DD:n.digit(l.DD||a.getDate()),hh:n.digit(l.hh||a.getHours()),mm:n.digit(l.mm||a.getMinutes()),ss:n.digit(l.ss||a.getSeconds())}:(tt=r.setValue(l,r.format,!1),v=[],$.each(new Array(2),function(i){var u={},f=n.reMatch(tt.split(t.range)[i]);$.each(n.reMatch(r.format),function(n,t){u[t]=f[n]});v.push(u)}));($.isFunction(t.okfun)||t.okfun!=null)&&t.okfun({elem:u,val:w,date:v})})},i.clickTime=function(n,t){var i=this,r;if(/\hh/.test(i.format)){r=i.maincon(".timebox",1).find("ul");r.on("click","li",function(){var n=$(this),u=n.parent().attr("idx"),f=n.text();n.hasClass("disabled")||(n.addClass("action").siblings().removeClass("action"),t.find(".timecon em").eq(u).text(f),i.locateScroll(r))})}},i.locateScroll=function(n){$.each(n,function(){var n=$(this),t=n.find(".action"),i=t.length>0?t[0].offsetTop-114:0;n[0].scrollTop=i})},i.lunarOrien=function(t,i,r){var f,e,o,s,u=i[0].getBoundingClientRect();return e=u.right+t[0].offsetWidth/1.5>=n.docArea(1)?u.right-t[0].offsetWidth:u.left+(r?0:n.docScroll(1)),f=u.bottom+t[0].offsetHeight/1<=n.docArea()?u.bottom-1:u.top>t[0].offsetHeight/1.5?u.top-t[0].offsetHeight-1:n.docArea()-t[0].offsetHeight,o=Math.max(f+(r?0:n.docScroll())+1,1)+"px",s=e+"px",{top:o,left:s}},i.dateOrien=function(t,i,r){var l=this,e,o,u=l.fixed?i[0].getBoundingClientRect():t[0].getBoundingClientRect(),s=u.left,h=u.bottom,c,f;l.fixed?(c=t.outerWidth(),f=t.outerHeight(),s+c>n.docArea(!0)&&(s=n.docArea(!0)-c),h+f>n.docArea()&&(h=u.top>f?u.top-f-2:n.docArea()-f-1),e=Math.max(h+(r?0:n.docScroll())+1,1)+"px",o=s+"px"):(e="50%",o="50%",t.css({"margin-top":-(u.height/2),"margin-left":-(u.width/2)}));t.css({top:e,left:o})},i.tips=function(t,i){var r=this,u=$(n.boxelem).find(".jedate-tips");u.html("").html(t||"").show();clearTimeout(r.tipTime);r.tipTime=setTimeout(function(){u.html("").hide()},(i||2.5)*1e3)},i.dateClose=function(){$($(n.boxelem).attr(s)).length==0&&$(n.boxelem).remove()},i.dateContrast=function(i,r){var u=i.split("-"),f=r.split("-"),e=t(u[0]+""+n.digit(t(u[1])-1)+""+n.digit(u[2]||"01")),o=t(f[0]+""+n.digit(t(f[1])-1)+""+n.digit(u[2]||"01"));return e>=o?!1:!0},i.delAreaAttr=function(){delete this.areaStart;delete this.areaEnd;this.areaVal=[]},i.jeLunar=function(n,i,r){function p(n){var b=function(n,t){var i=new Date(31556925974.7*(n-1900)+h[t]*6e4+Date.UTC(1900,0,6,2,5));return i.getUTCDate()},nt=function(n){for(var i=348,t=32768;t>8;t>>=1)i+=u[n-1900]&t?1:0;return i+k(n)},w=function(n){return c.charAt(n%10)+l.charAt(n%12)},k=function(n){return d(n)?u[n-1900]&65536?30:29:0},d=function(n){return u[n-1900]&15},g=function(n,t){return u[n-1900]&65536>>t?30:29},tt=function(n){var t,u=0,r=0,f=new Date(1900,0,31),i=(n-f)/864e5;for(this.dayCyl=i+40,this.monCyl=14,t=1900;t<2050&&i>0;t++)r=nt(t),i-=r,this.monCyl+=12;for(i<0&&(i+=r,t--,this.monCyl-=12),this.year=t,this.yearCyl=t-1864,u=d(t),this.isLeap=!1,t=1;t<13&&i>0;t++)u>0&&t==u+1&&this.isLeap==!1?(--t,this.isLeap=!0,r=k(this.year)):r=g(this.year,t),this.isLeap==!0&&t==u+1&&(this.isLeap=!1),i-=r,this.isLeap==!1&&this.monCyl++;i==0&&u>0&&t==u+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--t,--this.monCyl));i<0&&(i+=r,--t,--this.monCyl);this.month=t;this.day=i+1},p=function(n){return n<10?"0"+(n|0):n},r=function(n,t){var i=n;return t.replace(/dd?d?d?|MM?M?M?|yy?y?y?/g,function(n){switch(n){case"yyyy":var t="000"+i.getFullYear();return t.substring(t.length-4);case"dd":return p(i.getDate());case"d":return i.getDate().toString();case"MM":return p(i.getMonth()+1);case"M":return i.getMonth()+1}})},it=function(n,t){var i;switch(n,t){case 10:i="初十";break;case 20:i="二十";break;case 30:i="三十";break;default:i=v.charAt(Math.floor(t/10))+e.charAt(t%10)}return i},i;this.isToday=!1;this.isRestDay=!1;this.solarYear=r(n,"yyyy");this.solarMonth=r(n,"M");this.solarDate=r(n,"d");this.solarWeekDay=n.getDay();this.inWeekDays="星期"+e.charAt(this.solarWeekDay);i=new tt(n);this.lunarYear=i.year;this.shengxiao=a.charAt((this.lunarYear-4)%12);this.lunarMonth=i.month;this.lunarIsLeapMonth=i.isLeap;this.lnongMonth=this.lunarIsLeapMonth?"闰"+o[i.month-1]:o[i.month-1];this.lunarDate=i.day;this.showInLunar=this.lnongDate=it(this.lunarMonth,this.lunarDate);this.lunarDate==1&&(this.showInLunar=this.lnongMonth+"月");this.ganzhiYear=w(i.yearCyl);this.ganzhiMonth=w(i.monCyl);this.ganzhiDate=w(i.dayCyl++);this.jieqi="";this.restDays=0;b(this.solarYear,(this.solarMonth-1)*2)==r(n,"d")&&(this.showInLunar=this.jieqi=f[(this.solarMonth-1)*2]);b(this.solarYear,(this.solarMonth-1)*2+1)==r(n,"d")&&(this.showInLunar=this.jieqi=f[(this.solarMonth-1)*2+1]);this.showInLunar=="清明"&&(this.showInLunar="清明节",this.restDays=1);this.solarFestival=y[r(n,"MM")+r(n,"dd")];typeof this.solarFestival=="undefined"?this.solarFestival="":/\*(\d)/.test(this.solarFestival)&&(this.restDays=t(RegExp.$1),this.solarFestival=this.solarFestival.replace(/\*\d/,""));this.showInLunar=this.solarFestival==""?this.showInLunar:this.solarFestival;this.lunarFestival=s[this.lunarIsLeapMonth?"00":p(this.lunarMonth)+p(this.lunarDate)];typeof this.lunarFestival=="undefined"?this.lunarFestival="":/\*(\d)/.test(this.lunarFestival)&&(this.restDays=this.restDays>t(RegExp.$1)?this.restDays:t(RegExp.$1),this.lunarFestival=this.lunarFestival.replace(/\*\d/,""));this.lunarMonth==12&&this.lunarDate==g(this.lunarYear,12)&&(this.lunarFestival=s["0100"],this.restDays=1);this.showInLunar=this.lunarFestival==""?this.showInLunar:this.lunarFestival}var u=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],h=[0,21208,43467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758],c="甲乙丙丁戊己庚辛壬癸",l="子丑寅卯辰巳午未申酉戌亥",a="鼠牛虎兔龙蛇马羊猴鸡狗猪",f=["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],e="日一二三四五六七八九十",v="初十廿卅",o=["正","二","三","四","五","六","七","八","九","十","十一","腊"],y={"0101":"*1元旦节","0202":"湿地日","0214":"情人节","0308":"妇女节","0312":"植树节","0315":"消费者权益日","0401":"愚人节","0422":"地球日","0501":"*1劳动节","0504":"青年节","0512":"护士节","0518":"博物馆日","0520":"母亲节","0601":"儿童节","0623":"奥林匹克日","0630":"父亲节","0701":"建党节","0801":"建军节","0903":"抗战胜利日","0910":"教师节","1001":"*3国庆节","1201":"艾滋病日","1224":"平安夜","1225":"圣诞节"},s={"0100":"除夕","0101":"*2春节","0115":"元宵节","0505":"*1端午节","0707":"七夕节","0715":"中元节","0815":"*1中秋节","0909":"*1重阳节","1015":"下元节","1208":"腊八节","1223":"小年"};return new p(new Date(n,i,r))},$.dateVer="6.0.0",$.nowDate=function(t,i,r){return r=r||"YYYY-MM-DD hh:mm:ss",i=i||[],typeof t=="number"&&(t={DD:t}),n.reSetDate(t,i,r)},$.timeStampDate=function(i,r){var o,u,f;if(r=r||"YYYY-MM-DD hh:mm:ss",o=/^(-)?\d{1,10}$/.test(i)||/^(-)?\d{1,13}$/.test(i),/^[1-9]*[1-9][0-9]*$/.test(i)&&o){if(u=t(i),/^(-)?\d{1,10}$/.test(u))u=u*1e3;else if(/^(-)?\d{1,13}$/.test(u))u=u*1e3;else if(/^(-)?\d{1,14}$/.test(u))u=u*100;else{alert("时间戳格式不正确");return}return f=new Date(u),n.parse({YYYY:f.getFullYear(),MM:n.digit(f.getMonth()+1),DD:n.digit(f.getDate()),hh:n.digit(f.getHours()),mm:n.digit(f.getMinutes()),ss:n.digit(f.getSeconds())},r)}var e=n.reMatch(i),s=new Date(e[0],t(e[1])-1,e[2],e[3]||0,e[4]||0,e[5]||0);return Math.round(s.getTime()/1e3)},$.splitDate=function(n){var i=n.match(/\w+|d+/g);return{YYYY:t(i[0]),MM:t(i[1])||00,DD:t(i[2])||00,hh:t(i[3])||00,mm:t(i[4])||00,ss:t(i[5])||00}},$.getLunar=function(i,r){var e=this;if(r=r||"YYYY-MM-DD hh:mm:ss",/YYYY-MM-DD/g.test(n.isparmat(r))){var o=i.substr(0,4).replace(/^(\d{4})/g,"$1,")+i.substr(4).replace(/(.{2})/g,"$1,"),f=n.isNum(i)?n.reMatch(o):n.reMatch(i),u=e.jeLunar(f[0],f[1]-1,f[2]);return{nMonth:u.lnongMonth,nDays:u.lnongDate,yYear:t(u.solarYear),yMonth:t(u.solarMonth),yDays:t(u.solarDate),cWeek:u.inWeekDays,nWeek:u.solarWeekDay}}},o});