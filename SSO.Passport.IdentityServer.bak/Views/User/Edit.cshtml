@model Models.Entity.UserInfo

@{
    ViewBag.Title = "编辑用户";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
    <div class="row">
        <div class="col-md-6">
            <form id="form" action="/User/Edit" method="post" onsubmit="return false">
                @Html.AntiForgeryToken()
                <div class="form-horizontal">
                    <h2 class="page-header text-center">编辑用户</h2>
                    @Html.ValidationSummary(true, "", new {@class = "text-danger"})
                    @Html.HiddenFor(model => model.Id)

                    <div class="form-group">
                        @Html.LabelFor(model => model.Username, htmlAttributes: new {@class = "control-label col-md-2"})
                        <div class="col-md-10">
                            @Html.EditorFor(model => model.Username, new {htmlAttributes = new {@class = "form-control"}})
                            @Html.ValidationMessageFor(model => model.Username, "", new {@class = "text-danger"})
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.PhoneNumber, htmlAttributes: new {@class = "control-label col-md-2"})
                        <div class="col-md-10">
                            @Html.EditorFor(model => model.PhoneNumber, new {htmlAttributes = new {@class = "form-control"}})
                            @Html.ValidationMessageFor(model => model.PhoneNumber, "", new {@class = "text-danger"})
                        </div>
                    </div>

                    <div class="form-group">
                        @Html.LabelFor(model => model.Email, htmlAttributes: new {@class = "control-label col-md-2"})
                        <div class="col-md-10">
                            @Html.EditorFor(model => model.Email, new {htmlAttributes = new {@class = "form-control"}})
                            @Html.ValidationMessageFor(model => model.Email, "", new {@class = "text-danger"})
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-offset-2 col-md-10">
                            <input type="button" value="保存" id="save" class="btn btn-default"/>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
<script>
	$(function() {
		$("#save").click(function(e) {
			swal({
					title: "确认保存?",
					text: "确认修改用户数据!",
					type: "warning",
					showCancelButton: true,
					confirmButtonColor: "#DD6B55",
					confirmButtonText: "保存",
					cancelButtonText: "取消",
					showLoaderOnConfirm: true,
					preConfirm: function() {
                        return new Promise(function (resolve) {
	                        $.post("/User/Update", $("#form").serialize(), function(data) {
		                        data = JSON.parse(data);
                                resolve(data);
	                        });
						});
					},
					allowOutsideClick: false
            }).then(function (data) {
				if (data.Success) {
					swal("操作成功！", data.Message, "success");
				} else {
					swal("操作失败！", data.Message, "error");
				}
			}, function() {
                swal("操作被取消！", "数据不会被保存！", "error");
			});
		});
	});
</script>